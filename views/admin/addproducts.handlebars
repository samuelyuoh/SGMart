<div class="container">
  	<div class="card card-body">
    <div class="row">
        <div class="col-md-1"></div>
            <div class="col-md-10">
            		<p class="head1">{{#if (checkurl path "/addproduct")}}Add a {{else}}Update {{/if}}product<p>
                <form method="post">
                <div>
                  {{#if (checkurl path "/addproduct")}}
                    <label for='product_name'>Enter product name</label>
                    <input type="text" class="form-control" name="product_name" placeholder="Enter product name" value="{{product_name}}"required>
                  {{else}}
                  {{#product}}
                    <label for='product_name'>Edit product name</label>
                    <input type="text" class="form-control" name="product_name" placeholder="{{product_name}}" value="{{product_name}}">
                  {{/product}}
                  {{/if}}
                    <div class="p-2"></div>
                  {{#if (checkurl path "/addproduct")}}

                    <label for='product_price'>Enter price</label>
                    <input type="number" class="form-control" name="product_price" placeholder="Enter price" step = ".01" min ="0.1" value="{{product_price}}" required>
                  {{else}}
                  {{#product}}
                    <label for='product_price'>Edit price</label>
                    <input type="number" class="form-control" name="product_price" placeholder="{{product_price}}" step = ".01" min ="0.1" value="{{product_price}}">
                  {{/product}}
                  {{/if}}
                    <div class="p-2"></div>
                  {{#if (checkurl path "/addproduct")}}

                    <label for='discount'>Discount</label>
                    <input type="number" class="form-control" name="discount" step=".01" min = "0" value="{{discount}}" required>
                  {{else}}
                  {{#product}}
                    <label for="discount">Edit Discount</label>
                    <input type="number" class="form-control" name="discount" step=".01" min ="0" value="{{discount}}" placeholder ={{discount}} default="{{discount}}">
                  {{/product}}
                  {{/if}}
                  {{#if (checkurl path "/addproduct")}}
                    <label for="discount">Cost of product</label>
                    <input type="number" class="form-control" name="cost" step=".01" min ="0.1" value="{{cost}}" required>
                    <div class="p-2"></div>
                  {{/if}}
                  {{#if (checkurl path "/addproduct")}}
                    <label for='stock'>Enter stock</label>
                    <input type="number" class="form-control" name="stock" placeholder="Enter stock" value="{{stock}}">
                    <div class="p-2"></div>
                  {{/if}}
                  {{#if (checkurl path "/addproduct")}}

                    <label for="brandId">Add a brand</label>
                    <select name="brandId" id="brandId" class="form-control" required>
                     <option value="" selected="selected" hidden="hidden"> Select A Brand</option>
                     {{#each brands}}
                     <option value="{{id}}">{{brand_name}}</option>
                     {{/each}}
                    </select>
                  {{else}}
                    <label for="brandId">change brand</label>
                    <select name="brandId" id="brandId" class="form-control">
                  {{#brand_name}}
                    <option value="{{id}}" selected="selected" hidden="hidden">{{brand_name}}</option>
                  {{/brand_name}}
                     {{#each brands}}
                     <option value="{{id}}">{{brand_name}}</option>
                     {{/each}}
                    </select>
                  {{/if}}
                    <div class="p-2"></div>
                  {{#if (checkurl path "/addproduct")}} 

                    <label for="categoryId">Add a category</label>
                    <select name="categoryId" id="categoryId" class="form-control" required>
                      <option value="" selected="selected" hidden="hidden"> Add a Category</option>Select A category</option>
                      {{#each category}}
                      <option value="{{id}}">{{category_name}}</option> 
                      {{/each}}
                    </select>
                  {{else}}
                  {{#category_name}}
                  <label for="CategoryId">Change Category</label>
                  <select name="categoryId" id="categoryId" class="form-control">
                  <option value="{{id}}" selected="selected" hidden="hidden">{{category_name}}</option>
                  {{/category_name}}
                      {{#each category}}
                      <option value="{{id}}">{{category_name}}</option> 
                      {{/each}}
                    </select>
                  {{/if}}

                    <div class="p-2"></div>
                    {{#if (checkurl path "/addproduct")}}

                    <label for="desc">Description</label>
                    <textarea name="desc" id="desc" class="form-control" rows=10 value="{{desc}}"></textarea>
                    {{else}}
                    {{#product}}
                    <label for="desc">Description</label>
                    <textarea name="desc" id="desc" class="form-control" rows=10 value="{{desc}}" placeholder="{{desc}}">{{desc}}</textarea>
                    {{/product}}
                    {{/if}}
                </div>
                {{#if (checkurl path "/addproduct")}}

                <div class="container">
                        <div class="col-md-4"> 
                          <div id="drop-area">
                            <input type="file" class="custom-file-input" id="image" name="image" accept="image/png,image/jpeg,image/jpg,image/gif,image/jfif" onchange="imagePreview(event);" required/> 
                            <img src="" id="output">
                          </div>
                        </div>
                </div>
                {{else}}
                    <div class="row">
                        <div class="col-md-4"> 
                    {{#product}}
                        <div id="drop-area">
                            <input type="file" class="custom-file-input" value="{{image}}"
                            id="image" name="image" accept="image/png,image/jpeg,image/jpg,image/gif,image/jfif" onchange="imagePreview(event);"/> 
                            <img src="/images/{{image}}" id="output" width="200" height="200">
                          </div>
                    {{/product}}
                        </div>
                    </div>
                {{/if}}
                <p><input type="submit" value="{{#if (checkurl path "/addproduct")}}Add{{else}}Update{{/if}} product" class="btn btn-success"></p>
                </form>
            </div>
      <div class="col-md-10"></div>
    </div>
    </div>
</div>
<script>
  var imagePreview = function(event) {
    var reader = new FileReader();
    reader.onload = function(){
      var output = document.getElementById('output');
      output.src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  };
  let dropArea = document.getElementById('drop-area')
    dropArea.addEventListener('dragenter', handlerFunction, false)
    dropArea.addEventListener('dragleave', handlerFunction, false)
    dropArea.addEventListener('dragover', handlerFunction, false)
    dropArea.addEventListener('drop', handlerFunction, false)
</script>

<style>
  .head1{
    font-size: 34px;
    font-weight: bold;
    text-align: center;
}
  .container{
    width: auto;
    padding-top: 50px;
    padding-bottom: 50px;
  }
  #drop-area {
  border: 2px dashed #ccc;
  border-radius: 20px;
  width: 480px;
  font-family: sans-serif;
  margin: 100px auto;
  padding: 20px;
  margin-top: 30px;
  margin-bottom: 30px;
}
#drop-area.highlight {
  border-color: purple;
}

img{
  width: 200px;
  height: 200px;
}
</style>